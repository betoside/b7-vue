<!DOCTYPE html>
<html lang="en">
<head>
    <title>Usado para testar a aula da vez</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://v2.vuejs.org/js/vue.js"></script>
</head>
<body>
<pre>




<hr>
<strong>#50: Solução: Sinal de trânsito (2/2)</strong>
    <style>
        #v_49{
            background: #000;
            color: #fff;
        }
        .v49-controle{
            border: 2px dashed #ccc;
            padding: 20px;
            margin-bottom: 20px;
        }
        .bola{
            width: 50px;
            height: 50px;
            border-radius: 25px;
            border: 1px solid #999;
            margin-bottom: 20px;
            background: #000;
        }
        .sinal{
            background: #333;
            padding: 20px;
            padding-bottom: 0;
            display: inline-block;
            border-radius: 25px;

        }
        .red{ background: #f00; }
        .yellow{ background: #ff0; }
        .green{ background: #0f0; }
    </style>
    <div>
        <div id="v_49">
            <div class="v49-controle">
                <button v-if="sinalStatus == 'red'" v-on:click="liberar">Liberar</button>
                <button v-else v-on:click="fechar">Fechar</button>
            </div>

            <sinal v-bind:status="sinalStatus" />
            
        </div>
    </div>
    <script type="text/javascript">
        let v49_bola = {
            props:['cor'],
            template:`
                <div class="bola" v-bind:class='cor'>
                </div>
            `
        };

        Vue.component('sinal', {
            props:['status'],
            components:{
                bola: v49_bola
            },
            template:`
                <div class="sinal">
                    <template v-if="status == 'red'">
                        <bola cor="red" />
                        <bola />
                        <bola />
                    </template>
                    <template v-else-if="status == 'yellow'">
                        <bola />
                        <bola cor="yellow" />
                        <bola />
                    </template>
                    <template v-else-if="status == 'green'">
                        <bola />
                        <bola />
                        <bola cor="green" />
                    </template>
                </div>
            `
        });

        let v_49 = new Vue({
            el:'#v_49',
            data:{
                sinalStatus:'red' // red, yeloow, green

            },
            methods:{
                liberar:function(){
                    console.log('liberar');
                    this.sinalStatus = 'green';
                },
                fechar:function(){
                    console.log('fechar: yellow');
                    setTimeout(this.fecharSinal, 1000);
                    this.sinalStatus = 'yellow';
                },
                fecharSinal: function(){
                    this.sinalStatus = 'red';
                }
            }
        });
    </script>

    ---style>
        #v_49{
            background: #000;
            color: #fff;
        }
        .v49-controle{
            border: 2px dashed #ccc;
            padding: 20px;
            margin-bottom: 20px;
        }
        .bola{
            width: 50px;
            height: 50px;
            border-radius: 25px;
            border: 1px solid #999;
            margin-bottom: 20px;
            background: #000;
        }
        .sinal{
            background: #333;
            padding: 20px;
            padding-bottom: 0;
            display: inline-block;
            border-radius: 25px;

        }
        .red{ background: #f00; }
        .yellow{ background: #ff0; }
        .green{ background: #0f0; }
    ---/style>
    ---div>
        ---div id="v_49">
            ---div class="v49-controle">
                ---button v-if="sinalStatus == 'red'" v-on:click="liberar">Liberar---/button>
                ---button v-else v-on:click="fechar">Fechar---/button>
            ---/div>

            ---sinal v-bind:status="sinalStatus" />
            
        ---/div>
    ---/div>
    ---script type="text/javascript">
        let v49_bola = {
            props:['cor'],
            template:`
                ---div class="bola" v-bind:class='cor'>
                ---/div>
            `
        };

        Vue.component('sinal', {
            props:['status'],
            components:{
                bola: v49_bola
            },
            template:`
                ---div class="sinal">
                    ---template v-if="status == 'red'">
                        ---bola cor="red" />
                        ---bola />
                        ---bola />
                    ---/template>
                    ---template v-else-if="status == 'yellow'">
                        ---bola />
                        ---bola cor="yellow" />
                        ---bola />
                    ---/template>
                    ---template v-else-if="status == 'green'">
                        ---bola />
                        ---bola />
                        ---bola cor="green" />
                    ---/template>
                ---/div>
            `
        });

        let v_49 = new Vue({
            el:'#v_49',
            data:{
                sinalStatus:'red' // red, yeloow, green

            },
            methods:{
                liberar:function(){
                    console.log('liberar');
                    this.sinalStatus = 'green';
                },
                fechar:function(){
                    console.log('fechar: yellow');
                    setTimeout(this.fecharSinal, 1000);
                    this.sinalStatus = 'yellow';
                },
                fecharSinal: function(){
                    this.sinalStatus = 'red';
                }
            }
        });
    ---/script>

</pre>

</body>
</html>